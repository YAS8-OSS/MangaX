<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MangaX â€” Ù…Ø§Ù†Ø¬Ø§ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ</title>
  <meta name="description" content="MangaX â€” Ù‚Ø§Ù„Ø¨ Ù…Ø§Ù†Ø¬Ø§ Ø¹Ø±Ø¨ÙŠ Ø®ÙÙŠÙ ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ GitHub Pages Ø¨Ø¯ÙˆÙ† Ø¨Ø§Ùƒâ€‘Ø¥Ù†Ø¯. ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ù…Ø¹ Ø¨Ø­Ø«ØŒ Ù‚Ø±Ø§Ø¡Ø© ÙØµÙˆÙ„ØŒ ÙˆÙ…ÙØ¶Ù„Ø©." />
  <meta name="keywords" content="Ù…Ø§Ù†Ø¬Ø§, manga, Ù‚Ø±Ø§Ø¡Ø© Ù…Ø§Ù†Ø¬Ø§, ØªØ±Ø¬Ù…Ø© Ù…Ø§Ù†Ø¬Ø§, MangaX" />
  <meta name="theme-color" content="#0b0b0f" />
  
  <!-- Ù…ÙƒØ§Ù† ÙƒÙˆØ¯ AdSense Ù„Ø§Ø­Ù‚Ø§Ù‹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ). Ø§Ø³ØªØ¨Ø¯Ù„ÙŠ YOUR-ADSENSE-CODE Ù‡Ù†Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ù‚Ø¨ÙˆÙ„ Ù…Ù† Ø¬ÙˆØ¬Ù„. -->
  <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=YOUR-ADSENSE-CODE" crossorigin="anonymous"></script> -->

  <style>
    :root{
      --bg:#0b0b0f; --soft:#12121a; --muted:#9aa4b2; --text:#e8ecf3; --brand:#7c5cff; --accent:#21c55d; --card:#0f1016; --border:#1f2430;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Noto Kufi Arabic",Tahoma,Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block;border-radius:14px}
    .container{max-width:1100px;margin:0 auto;padding:18px}
    header{position:sticky;top:0;z-index:5;background:linear-gradient(180deg,rgba(11,11,15,.95),rgba(11,11,15,.75));backdrop-filter:saturate(140%) blur(8px);border-bottom:1px solid var(--border)}
    .nav{display:flex;gap:12px;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .logo{width:36px;height:36px;display:grid;place-items:center;border-radius:12px;background:linear-gradient(135deg,var(--brand),#19c3ff)}
    .logo span{font-weight:900}
    .search{flex:1;max-width:520px;display:flex;gap:8px;align-items:center;background:var(--soft);border:1px solid var(--border);padding:8px 12px;border-radius:14px}
    .search input{all:unset;direction:rtl;flex:1}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:14px;background:var(--brand);border:1px solid #6e58f8;color:white;font-weight:700;cursor:pointer}
    .btn.secondary{background:transparent;border-color:var(--border);color:var(--text)}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
    @media(min-width:700px){.grid{grid-template-columns:repeat(4,1fr)}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:18px;overflow:hidden;transition:.2s transform,.2s box-shadow}
    .card:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .card-body{padding:12px}
    .badge{display:inline-block;background:var(--soft);border:1px solid var(--border);color:var(--muted);padding:4px 8px;border-radius:999px;font-size:12px}
    .meta{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
    .section-title{font-size:18px;margin:18px 0 10px}
    .pillbar{display:flex;gap:10px;flex-wrap:wrap}
    .pill{background:var(--soft);border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:13px;cursor:pointer}
    .layout{display:grid;gap:18px;grid-template-columns:1fr}
    @media(min-width:920px){.layout{grid-template-columns:280px 1fr}}
    .sidebar{position:sticky;top:78px;height:max-content;background:var(--card);border:1px solid var(--border);border-radius:18px;padding:14px}
    .list{display:flex;flex-direction:column;gap:8px}
    .list a{padding:10px 12px;border-radius:10px;background:var(--soft);border:1px solid var(--border)}
    .ad{display:grid;place-items:center;aspect-ratio:3/1;background:repeating-linear-gradient(45deg,var(--soft),var(--soft) 8px,var(--card) 8px,var(--card) 16px);border:1px dashed var(--border);border-radius:16px;color:var(--muted)}
    footer{border-top:1px solid var(--border);margin-top:30px}
    .muted{color:var(--muted)}
    .reader-img{width:100%;height:auto}
    .topbar{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-bottom:10px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{padding:7px 10px;border:1px solid var(--border);border-radius:10px;background:var(--soft);cursor:pointer}
    .tab.active{background:var(--brand);color:white;border-color:#6e58f8}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a href="#/" class="brand" aria-label="Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
        <div class="logo"><span>ğ•</span></div>
        <span>MangaX</span>
      </a>

      <label class="search" aria-label="Ø¨Ø­Ø«"><input id="q" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø§Ù†Ø¬Ø§â€¦" /><button class="btn secondary" id="clear">Ù…Ø³Ø­</button></label>
      <nav class="tabs">
        <a class="tab" href="#/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a class="tab" href="#/favorites">Ø§Ù„Ù…ÙØ¶Ù„Ø©</a>
        <a class="tab" href="#/about">Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹</a>
      </nav>
    </div>
  </header>

  <main class="container" id="app" aria-live="polite"></main>
  <footer class="container muted">Â© <span id="year"></span> MangaX â€” Ù‚Ø§Ù„Ø¨ ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ GitHub Pages.
  </footer>

<script>
// ===== Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© (Ø¹Ø¯Ù„ÙŠÙ‡Ø§ Ø¨Ø±Ø§Ø­ØªÙƒ) =====
const DB = [
  {
    slug: 'shadow-blade',
    title: 'Blade of Shadows',
    alt: 'Ø¨Ù„ÙŠØ¯ Ø£ÙˆÙ Ø´Ø§Ø¯ÙˆØ²',
    cover: 'https://images.unsplash.com/photo-1618336753974-aae8e04506b4?q=80&w=640&auto=format&fit=crop',
    status: 'Ù…Ø³ØªÙ…Ø±Ø©',
    tags: ['Ø£ÙƒØ´Ù†','ÙØ§Ù†ØªØ§Ø²ÙŠØ§'],
    summary: 'Ù…Ø­Ø§Ø±Ø¨ ØºØ§Ù…Ø¶ ÙŠØ¹ÙˆØ¯ Ø¨Ù‚ÙˆØ© Ø§Ù„Ø³ÙŠÙ Ø§Ù„Ù…Ø¸Ù„Ù… Ù„ÙŠÙ†ØªÙ‚Ù… Ù…Ù† Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© ÙØ§Ø³Ø¯Ø©.',
    chapters: [
      { no: 1, title: 'Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø¸Ù„Ù…Ø©', pages: [
        'https://picsum.photos/seed/sb-1/900/1300',
        'https://picsum.photos/seed/sb-2/900/1300',
        'https://picsum.photos/seed/sb-3/900/1300'
      ]},
      { no: 2, title: 'Ù†ØµÙ„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù…', pages: [
        'https://picsum.photos/seed/sb-4/900/1300',
        'https://picsum.photos/seed/sb-5/900/1300'
      ]}
    ]
  },
  {
    slug: 'sweet-campus',
    title: 'Sweet Campus',
    alt: 'Ø³ÙˆÙŠØª ÙƒØ§Ù…Ø¨Ø³',
    cover: 'https://images.unsplash.com/photo-1507908708918-778587c9e563?q=80&w=640&auto=format&fit=crop',
    status: 'Ù…ÙƒØªÙ…Ù„Ø©',
    tags: ['Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ','Ù…Ø¯Ø±Ø³ÙŠ'],
    summary: 'Ù‚ØµØ© Ø­Ø¨ Ø®ÙÙŠÙØ© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ø±Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ Ù…Ø¹ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ø·Ø±ÙŠÙØ©.',
    chapters: [
      { no: 1, title: 'Ø£ÙˆÙ„ Ù„Ù‚Ø§Ø¡', pages: [
        'https://picsum.photos/seed/sc-1/900/1300',
        'https://picsum.photos/seed/sc-2/900/1300'
      ] }
    ]
  }
];

// ===== Ø£Ø¯ÙˆØ§Øª ØµØºÙŠØ±Ø© =====
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));
const state = { q: '', view: 'home', params: [] };
const favKey = 'mangax:favs';
const getFavs = () => new Set(JSON.parse(localStorage.getItem(favKey) || '[]'));
const setFavs = s => localStorage.setItem(favKey, JSON.stringify([...s]));

function slugify(s){return s.toLowerCase().replace(/[^\w\u0600-\u06FF]+/g,'-').replace(/^-+|-+$/g,'');}
function byQuery(items,q){ if(!q) return items; q=q.trim().toLowerCase(); return items.filter(x=>[x.title,x.alt,x.tags.join(' ')].join(' ').toLowerCase().includes(q)); }
function findManga(slug){ return DB.find(x=>x.slug===slug); }
function formatChapterLabel(ch){ return Ø§Ù„ÙØµÙ„ ${ch.no}${ch.title? ' â€” '+ch.title: ''} }

// ===== ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø±Ø³Ù… =====
function Home(){
  const list = byQuery(DB, state.q);
  return 
    <div class="topbar">
      <h2>Ø¢Ø®Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª</h2>
      <div class="ad">Ù…Ø³Ø§Ø­Ø© Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© 728Ã—90</div>
    </div>
    <div class="grid">${list.map(Card).join('')}</div>
  ;
}

function Card(m){
  const favs=getFavs();
  return 
    <a class="card" href="#/manga/${m.slug}" aria-label="Ø§ÙØªØ­ ${m.title}">
      <img src="${m.cover}" alt="${m.title}" loading="lazy"/>
      <div class="card-body">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:8px">
          <strong>${m.title}</strong>
          <button class="btn secondary" data-fav="${m.slug}" aria-pressed="${favs.has(m.slug)}">${favs.has(m.slug)?'â˜…':'â˜†'}</button>
        </div>
        <div class="meta">
          <span class="badge">${m.status}</span>
          ${m.tags.map(t=><span class="badge">${t}</span>).join('')}
        </div>
      </div>
    </a>;
}

function MangaPage(slug){
  const m = findManga(slug);
  if(!m) return NotFound();
  const chs = m.chapters.slice().sort((a,b)=>b.no-a.no);
  return 
    <div class="layout">
      <aside class="sidebar">
        <h3 style="margin-top:0">${m.title}</h3>
        <p class="muted">${m.summary}</p>
        <div class="pillbar">${m.tags.map(t=><span class="pill">${t}</span>).join('')}</div>
        <div class="ad" style="margin-top:12px">Ø¥Ø¹Ù„Ø§Ù† 300Ã—250</div>
        <div class="section-title">Ø§Ù„ÙØµÙˆÙ„</div>
        <div class="list">${chs.map(c=><a href="#/read/${m.slug}/${c.no}">${formatChapterLabel(c)}</a>).join('')}</div>
      </aside>
      <section>
        <img src="${m.cover}" alt="${m.title}"/>
        <div class="meta" style="margin-top:10px">
          <span class="badge">Ø§Ù„Ø­Ø§Ù„Ø©: ${m.status}</span>
          <span class="badge">Ø¹Ø¯Ø¯ Ø§Ù„ÙØµÙˆÙ„: ${m.chapters.length}</span>
        </div>
        <div class="section-title">Ù†Ø¨Ø°Ø©</div>
        <p>${m.summary}</p>
      </section>
    </div>
  ;
}

function Reader(slug, no){
  const m=findManga(slug); if(!m) return NotFound();
  const ch=m.chapters.find(c=>String(c.no)===String(no)); if(!ch) return NotFound();
  const idx=m.chapters.findIndex(c=>c.no===ch.no);
  const prev=m.chapters[idx+1]?.no; const next=m.chapters[idx-1]?.no;
  return 
    <div class="topbar">
      <div class="tabs">
        <a class="tab" href="#/manga/${slug}">Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø§Ù†Ø¬Ø§</a>
        ${prev?<a class="tab" href="#/read/${slug}/${prev}">â—€ Ø§Ù„Ø³Ø§Ø¨Ù‚</a>:''}
        ${next?<a class="tab" href="#/read/${slug}/${next}">Ø§Ù„ØªØ§Ù„ÙŠ â–¶</a>:''}
      </div>
      <div class="badge">${m.title} â€” ${formatChapterLabel(ch)}</div>
    </div>
    <div class="ad" style="margin-bottom:10px">Ø¥Ø¹Ù„Ø§Ù† 728Ã—90</div>
    ${ch.pages.map(src=><img class="reader-img" src="${src}" alt="ØµÙØ­Ø© Ù…Ø§Ù†Ø¬Ø§" loading="lazy"/>).join('')}
    <div class="ad" style="margin-top:10px">Ø¥Ø¹Ù„Ø§Ù† 728Ã—90</div>
  ;
}

function Favorites(){
  const favs=getFavs();
  const list=DB.filter(m=>favs.has(m.slug));
  if(!list.length) return <p class="muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¨Ø¹Ø¯. Ø§Ø¶ØºØ·ÙŠ Ù†Ø¬Ù…Ø© Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø§Ù†Ø¬Ø§ Ù„Ø¥Ø¶Ø§ÙØªÙ‡Ø§.</p>;
  return <div class="grid">${list.map(Card).join('')}</div>
}

function About(){
  return 
    <h2>Ø¹Ù† MangaX</h2>
    <p>Ù‚Ø§Ù„Ø¨ Ù…ÙØªÙˆØ­ Ø§Ù„Ù…ØµØ¯Ø± ÙˆØ®ÙÙŠÙ ÙŠØ¹Ù…Ù„ ÙƒØ§Ù…Ù„Ø§Ù‹ Ù…Ù† Ø¬Ù‡Ø© Ø§Ù„Ù…ØªØµÙØ­ØŒ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ GitHub Pages Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ø®Ø§Ø¯Ù….</p>
    <ul>
      <li>Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø§Ù†Ø¬Ø§ Ù…Ù† Ù…ØµÙÙˆÙØ© <code>DB</code> ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù.</li>
      <li>Ø±ÙØ¹ ØµÙˆØ± Ø§Ù„ÙØµÙˆÙ„ Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ© (Ù…Ø«Ù„ Imgur) Ø£Ùˆ Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù„Ø¯Ø§Øª ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹.</li>
      <li>Ø¥Ø¹Ù„Ø§Ù†Ø§Øª: Ø£Ø¶ÙŠÙÙŠ ÙƒÙˆØ¯ AdSense Ø«Ù… Ù‚Ø¯Ù…ÙŠ Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ AdSense Ø¨Ø¹Ø¯ ØªÙˆÙØ± Ù…Ø­ØªÙˆÙ‰ ÙƒØ§ÙÙ.</li>
    </ul>
  ;
}

function NotFound(){ return <p>Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.</p> }

// ===== Router =====
function render(){
  const hash=location.hash||'#/'
  const [,view,...params]=hash.split('/');
  state.view=view||''; state.params=params;
  const app=$('#app');
  if(view==='' || view==='#' || view===''){ app.innerHTML=Home(); }
  else if(view==='manga'){ app.innerHTML=MangaPage(params[0]); }
  else if(view==='read'){ app.innerHTML=Reader(params[0], params[1]); }
  else if(view==='favorites'){ app.innerHTML=Favorites(); }
  else if(view==='about'){ app.innerHTML=About(); }
  else { app.innerHTML=NotFound(); }
  // wire fav buttons
  $$('[data-fav]').forEach(btn=>{
    btn.onclick=()=>{
      const slug=btn.getAttribute('data-fav');
      const favs=getFavs();
      if(favs.has(slug)) favs.delete(slug); else favs.add(slug);
      setFavs(favs); render();
    }
  })
}

// ===== Search =====
$('#q').addEventListener('input', e=>{ state.q=e.target.value; render(); });
$('#clear').addEventListener('click', ()=>{ state.q=''; $('#q').value=''; render(); });
window.addEventListener('hashchange', render);
window.addEventListener('load', ()=>{ render(); $('#year').textContent=new Date().getFullYear(); });
</script>
</body>
</html>
